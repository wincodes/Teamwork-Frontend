(this["webpackJsonpteamwork-frontend"]=this["webpackJsonpteamwork-frontend"]||[]).push([[0],{102:function(e,t,a){},206:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(31),o=a.n(s),c=(a(89),a(90),a(5)),i=a(26),l=a(9),m=a(25),u=a(81),d=a(15),p="ERRORS",h="https://guarded-brushlands-25724.herokuapp.com/api/v1",f=function(e){return null===e||void 0===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length};function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={isAuthenticated:!1,user:{}},y=Object(m.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return g({},e,{isAuthenticated:!f(t.payload),user:t.payload});default:return g({},e)}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.payload;default:return e}}}),E=[u.a],N=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),O=Object(m.e)(y,{},Object(m.d)(m.a.apply(void 0,E),N||m.d)),j=a(1),k=a.n(j),x=a(2),w=a(46),S=a.n(w),C=function(e){return{type:"SET_CURRENT_USER",payload:e}},A=function(e){return function(t){localStorage.removeItem("jwtToken"),t(C({})),e.push("/login")}},I=a(6),D=a(7),T=a(10),P=a(8),M=a(11),Y=function(e){function t(){return Object(I.a)(this,t),Object(T.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(D.a)(t,[{key:"onLogoutClick",value:function(e){e.preventDefault(),this.props.logoutUser(this.props.history)}},{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,r=n.a.createElement("ul",{className:"navbar-nav ml-auto"},"admin"===a.usertype&&n.a.createElement("li",{className:"nav-item"},n.a.createElement(c.b,{className:"nav-link",to:"/register",style:{cursor:"pointer"}},"Create Employee")),n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement("div",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{cursor:"pointer"}},"Create Post"),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},n.a.createElement(c.b,{className:"dropdown-item",to:"/create-gif"},"Gif Post"),n.a.createElement(c.b,{className:"dropdown-item",to:"/create-article"},"Article"))),n.a.createElement("li",{className:"nav-item"},n.a.createElement("div",{onClick:this.onLogoutClick.bind(this),className:"nav-link",style:{cursor:"pointer"}},"Log Out"))),s=n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement(c.b,{className:"nav-link",to:"/login",style:{cursor:"pointer"}},"Login")));return n.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark mb-4"},n.a.createElement("div",{className:"container"},n.a.createElement(c.b,{className:"navbar-brand",to:"/"},"Team Work"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#mobile-nav"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},t&&n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement(c.b,{className:"nav-link",to:"/feeds",style:{cursor:"pointer"}}," ","Feeds"))),t?r:s)))}}]),t}(r.Component),F=Object(l.b)((function(e){return{auth:e.auth}}),{logoutUser:A})(Object(i.e)(Y)),L=a(83),R=a.n(L),U=function(e){function t(){return Object(I.a)(this,t),Object(T.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated&&n.a.createElement("div",{className:"p-3 text-left"},n.a.createElement("p",{className:"bg-primary p-2 text-white"},n.a.createElement("strong",null,"Logged In User Details:")),n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement("div",{className:"p-2"},n.a.createElement("strong",{className:"pr-2"},"First Name: "),e.user.firstName.toUpperCase()),n.a.createElement("div",{className:"p-2"},n.a.createElement("strong",{className:"pr-2"}," Last Name: "),e.user.lastName.toUpperCase()),n.a.createElement("div",{className:"p-2"},n.a.createElement("strong",{className:"pr-2"},"Email: "),e.user.email),n.a.createElement("div",{className:"p-2"},n.a.createElement("strong",{className:"pr-2"},"User Status: "),e.user.usertype.toUpperCase()))),a=n.a.createElement("div",{className:"p-3"},n.a.createElement("p",{className:"p-2"},n.a.createElement("strong",null,"Click the button below to Login")),n.a.createElement(c.b,{to:"/login",class:"btn btn-primary"},"Login"));return n.a.createElement("div",{className:"landing"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("img",{src:R.a,alt:"...",class:"rounded img-fluid"}),n.a.createElement("div",{className:"p-5"},n.a.createElement("h3",null," Team Work.. A Dev-C Project"),e.isAuthenticated?t:a)))))}}]),t}(r.Component),_=Object(l.b)((function(e){return{auth:e.auth}}),{})(U);function z(){return n.a.createElement("div",null,n.a.createElement("footer",{className:"footer text-center p-4 mt-5 text-white"},"Copyright \xa9 ",(new Date).getFullYear()," Team Work"))}var B=a(3),G=a(13),q=a(12),J=a(14),W=a.n(J);function H(){var e=Object(G.a)(["\n  position: fixed;\n  left: 45%;\n  top: 35%;\n  z-index: 1;\n"]);return H=function(){return e},e}var V=Object(q.css)(H()),X=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={email:"",password:"",errors:{},loading:!1},e.onChange=e.onChange.bind(Object(B.a)(e)),e.onSubmit=e.onSubmit.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.setState({loading:!0}),""!==this.state.email&&""!==this.state.password){var t={email:this.state.email,password:this.state.password};this.props.login(t,this.props.history)}else this.setState({errors:{email:"Email Field is Required",password:"Password field is required"},loading:!1})}},{key:"render",value:function(){var e=this.state.errors;return n.a.createElement("div",{className:"login"},n.a.createElement("div",{className:"container"},e.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},e.feedback),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("h2",{className:"text-center mb-4"},"Log In"),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"email",className:"form-control form-control-lg",placeholder:"Email Address",name:"email",value:this.state.email,onChange:this.onChange}),e.email&&n.a.createElement("div",{className:"text-danger"},e.email)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",className:"form-control form-control-lg",placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&n.a.createElement("div",{className:"text-danger"},e.password)),n.a.createElement("input",{type:"submit",disabled:this.state.loading,className:"btn btn-info btn-block mt-4"})),n.a.createElement(W.a,{className:"loading",css:V,loading:this.state.loading})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),$=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors}}),{login:function(e,t){return function(){var a=Object(x.a)(k.a.mark((function a(r){var n,s,o;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("".concat(h,"/auth/signin"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});case 3:return n=a.sent,a.next=6,n.json();case 6:"error"===(n=a.sent).status?"object"===typeof n.error?r({type:p,payload:n.error}):r({type:p,payload:{feedback:n.error}}):(s=n.data.token,localStorage.setItem("jwtToken",s),o=S()(s),r(C(o)),r({type:p,payload:{}}),t.push("/")),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0),r({type:p,payload:{feedback:"An error occurred, please try again"}});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}})(Object(i.e)(X));function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(){var e=Object(G.a)(["\n  position: fixed;\n  left: 45%;\n  top: 35%;\n  z-index: 1;\n"]);return Z=function(){return e},e}var ee=Object(q.css)(Z()),te={firstName:"",lastName:"",email:"",password:"",jobRole:"",department:"",address:"",gender:""},ae=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state=Q({},te,{errors:{},loading:!1,employeeCreated:!1}),e.onChange=e.onChange.bind(Object(B.a)(e)),e.onSubmit=e.onSubmit.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&"admin"===this.props.auth.user.usertype||this.props.history.push("/")}},{key:"onSubmit",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({loading:!0,employeeCreated:!1}),a={firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,password:this.state.password,jobRole:this.state.jobRole,department:this.state.department,address:this.state.address,gender:this.state.gender},e.next=5,this.props.register(a,this.props.history);case 5:"success"===e.sent.status&&this.setState(Q({employeeCreated:!0,errors:{},loading:!1},te));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.employeeCreated;return n.a.createElement("div",{className:"register"},n.a.createElement("div",{className:"container"},t.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},t.feedback),a&&n.a.createElement("div",{className:"alert alert-success alert-dismissible fade show",role:"alert"},"Employee Created Successfully",n.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("h2",{className:"text-center mb-4"},"Create an Employee"),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"First Name",name:"firstName",required:!0,value:this.state.firstName,onChange:this.onChange}),t.firstName&&n.a.createElement("div",{className:"text-danger"},t.firstName)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Last Name",name:"lastName",required:!0,value:this.state.lastName,onChange:this.onChange}),t.lastName&&n.a.createElement("div",{className:"text-danger"},t.lastName)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"email",className:"form-control form-control-lg",placeholder:"Email Address",name:"email",value:this.state.email,onChange:this.onChange}),t.email&&n.a.createElement("div",{className:"text-danger"},t.email)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Gender",name:"gender",required:!0,value:this.state.gender,onChange:this.onChange}),t.gender&&n.a.createElement("div",{className:"text-danger"},t.gender)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Job Role",name:"jobRole",required:!0,value:this.state.jobRole,onChange:this.onChange}),t.jobRole&&n.a.createElement("div",{className:"text-danger"},t.jobRole)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Department",name:"department",required:!0,value:this.state.department,onChange:this.onChange}),t.department&&n.a.createElement("div",{className:"text-danger"},t.department)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Address",name:"address",required:!0,value:this.state.address,onChange:this.onChange}),t.address&&n.a.createElement("div",{className:"text-danger"},t.address)),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",className:"form-control form-control-lg",placeholder:"Password",name:"password",required:!0,value:this.state.password,onChange:this.onChange}),t.password&&n.a.createElement("div",{className:"text-danger"},t.password)),n.a.createElement("input",{type:"submit",disabled:this.state.loading,className:"btn btn-info btn-block mt-4"})),n.a.createElement(W.a,{className:"loading",css:ee,loading:this.state.loading})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),re=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors,employee:e.employee}}),{register:function(e){return function(){var t=Object(x.a)(k.a.mark((function t(a){var r,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="Bearer "+localStorage.jwtToken,t.next=4,fetch("".concat(h,"/auth/create-user"),{method:"POST",withCredentials:!0,body:JSON.stringify(e),headers:{Authorization:r,"Content-Type":"application/json"}});case 4:return n=t.sent,t.next=7,n.json();case 7:if("error"!==(n=t.sent).status){t.next=13;break}return"object"===typeof n.error?a({type:p,payload:n.error}):a({type:p,payload:{feedback:n.error}}),t.abrupt("return",n);case 13:return a({type:p,payload:{}}),t.abrupt("return",n);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0),a({type:p,payload:{feedback:"An error occurred, please try again"}});case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}()}})(ae),ne=(a(102),function(e,t){return function(){var a=Object(x.a)(k.a.mark((function a(r){var n,s;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0,n="Bearer "+localStorage.jwtToken,s="",a.t0=t,a.next="article"===a.t0?6:"gif"===a.t0?10:14;break;case 6:return a.next=8,fetch("".concat(h,"/articles/").concat(e.articleId,"/comment"),{method:"POST",withCredentials:!0,body:JSON.stringify(e),headers:{Authorization:n,"Content-Type":"application/json"}});case 8:return s=a.sent,a.abrupt("break",14);case 10:return a.next=12,fetch("".concat(h,"/gifs/").concat(e.gifId,"/comment"),{method:"POST",withCredentials:!0,body:JSON.stringify(e),headers:{Authorization:n,"Content-Type":"application/json"}});case 12:return s=a.sent,a.abrupt("break",14);case 14:return a.next=16,s.json();case 16:if("error"!==(s=a.sent).status){a.next=26;break}if("object"!==typeof s.error){a.next=22;break}r({type:p,payload:s.error}),a.next=24;break;case 22:return r({type:p,payload:{feedback:s.error}}),a.abrupt("return",s);case 24:a.next=30;break;case 26:return r({type:p,payload:{}}),r({type:"NOTIFICATION",payload:{type:"success",message:"Comment Created Successfully"}}),a.abrupt("return",s);case 30:a.next=36;break;case 32:a.prev=32,a.t1=a.catch(0),console.log(a.t1),r({type:p,payload:{feedback:"An error occurred, please try again"}});case 36:case"end":return a.stop()}}),a,null,[[0,32]])})));return function(e){return a.apply(this,arguments)}}()});function se(){var e=Object(G.a)(["\n  position: fixed;\n  left: 45%;\n  top: 15%;\n  z-index: 1;\n"]);return se=function(){return e},e}var oe=Object(q.css)(se()),ce=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={errors:{},title:"",image:"",loading:!1,file:""},e.onChange=e.onChange.bind(Object(B.a)(e)),e.onSubmit=e.onSubmit.bind(Object(B.a)(e)),e.onInputChange=e.onInputChange.bind(Object(B.a)(e)),e.removeImage=e.removeImage.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.auth.isAuthenticated||this.props.history.push("/login");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({loading:!0}),a={title:this.state.title,image:this.state.file},e.next=5,this.props.postGif(a,this.props.history);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"onInputChange",value:function(e){this.setState({errors:{}});var t=e.target.files[0];t.type.match("image.gif")?this.setState({image:URL.createObjectURL(t),file:e.target.files[0]}):this.setState({errors:{image:"Image must be of Gif Type"}})}},{key:"removeImage",value:function(){this.setState({image:""})}},{key:"render",value:function(){var e=this.state.errors;return n.a.createElement("div",{className:"Create-Gif"},n.a.createElement("div",{className:"container"},e.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},e.feedback),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("div",null,n.a.createElement("h2",{className:"text-center mb-4"},"Create Gif Post")),n.a.createElement("form",{className:"form",onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Post Title",name:"title",required:!0,value:this.state.title,onChange:this.onChange,autoFocus:!0}),e.title&&n.a.createElement("div",{className:"text-danger"},e.title)),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"upload-images d-flex justify-content-center align-items-center"},!this.state.image&&n.a.createElement("div",{className:"file-input"},n.a.createElement("label",null,"Browse files"),n.a.createElement("input",{type:"file",id:"file",onChange:this.onInputChange,required:!0})),this.state.image&&n.a.createElement("div",{className:"position-relative"},n.a.createElement("p",{onClick:this.removeImage,className:"text-primary",style:{cursor:"pointer"}},"Click to remove image"),n.a.createElement("img",{src:this.state.image,alt:"Preview",width:"70%"}))),e.image&&n.a.createElement("div",{className:"text-danger"},e.image)),n.a.createElement("button",{type:"submit",disabled:this.state.loading,className:"btn btn-info form-control mt-4"},"Create")),n.a.createElement(W.a,{className:"loading",css:oe,loading:this.state.loading})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),ie=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors}}),{postGif:function(e,t){return function(){var a=Object(x.a)(k.a.mark((function a(r){var n,s,o,c;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(n=new FormData).append("title",e.title),n.append("image",e.image),s="Bearer "+localStorage.jwtToken,a.next=7,fetch("".concat(h,"/gifs"),{method:"POST",body:n,headers:{Authorization:s}});case 7:return o=a.sent,a.next=10,o.json();case 10:"error"===(o=a.sent).status?"object"===typeof o.error?r({type:p,payload:o.error}):r({type:p,payload:{feedback:o.error}}):(r({type:p,payload:{}}),r({type:"NOTIFICATION",payload:{type:"success",message:"Post Created Successfully"}}),c=o.data.gifId,t.push("/gifs/".concat(c))),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),console.log(a.t0),r({type:p,payload:{feedback:"An error occurred, please try again"}});case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()}})(Object(i.e)(ce)),le=function(e){return function(){var t=Object(x.a)(k.a.mark((function t(a){var r,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="Bearer "+localStorage.jwtToken,t.next=4,fetch("".concat(h,"/articles/").concat(e),{method:"GET",headers:{Authorization:r}});case 4:return n=t.sent,t.next=7,n.json();case 7:if("error"!==(n=t.sent).status){t.next=13;break}return"object"===typeof n.error?a({type:p,payload:n.error}):a({type:p,payload:{feedback:n.error}}),t.abrupt("return",n);case 13:return a({type:p,payload:{}}),t.abrupt("return",n);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0),a({type:p,payload:{feedback:"An error occurred, please try again"}});case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}()},me=a(16),ue=a.n(me),de=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={comment:"",error:""},e.onChange=e.onChange.bind(Object(B.a)(e)),e.onSubmit=e.onSubmit.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"onChange",value:function(e){this.setState({error:""}),this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault(),""!==this.state.comment&&null!==this.state.comment?(this.setState({comment:""}),this.props.onSubmitComment(this.state.comment)):this.setState({error:"Comment cannot be empty"})}},{key:"render",value:function(){var e=this.state.error,t=this.props.comments;return n.a.createElement("div",null,n.a.createElement("div",{className:"comment"},t.length>0&&t.map((function(e){return n.a.createElement("div",{key:e.id,className:"card"},n.a.createElement("p",{className:"p-2 text-left"},e.comment,n.a.createElement("br",null),n.a.createElement("small",{className:"text-muted"},e.firstname+" "+e.lastname)))}))),n.a.createElement("div",{className:"pt-4"},n.a.createElement("form",{className:"form",onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group pt-2"},n.a.createElement("textarea",{className:"form-control",name:"comment",rows:"3",placeholder:"Type a comment",value:this.state.comment,onChange:this.onChange}),e&&n.a.createElement("div",{className:"text-danger"},e)),n.a.createElement("button",{type:"submit",disabled:this.props.loading,className:"btn btn-info form-control mt-2"},"Create"))))}}]),t}(r.Component);function pe(){var e=Object(G.a)(["\n  position: fixed;\n  left: 50%;\n  top: 10%;\n  z-index: 1;\n"]);return pe=function(){return e},e}var he=Object(q.css)(pe()),fe=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={gifId:"",errors:{},gifPost:{},loading:!1},e.deletePost=e.deletePost.bind(Object(B.a)(e)),e.submitComment=e.submitComment.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.auth.isAuthenticated||this.props.history.push("/login"),t=this.props.match.params.gifId,this.setState({gifId:t}),0!==Object.keys(this.state.gifPost).length){e.next=9;break}return this.setState({loading:!0}),e.next=7,this.props.getSingleGif(t);case 7:"success"===(a=e.sent).status&&(r=a.data,this.setState({gifPost:r}));case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dateFormat",value:function(e){var t=new Date(e),a=new Date;return ue.a.format(a,"ddd. MMM. DD YYYY")===ue.a.format(t,"ddd. MMM. DD YYYY")?ue.a.format(t,"Today, hh:mm A"):ue.a.format(t,"ddd. MMM. DD YYYY")}},{key:"deletePost",value:function(){this.setState({loading:!0}),this.props.deleteGif(this.state.gifId,this.props.history)}},{key:"submitComment",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var a,r,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),a={gifId:this.state.gifId,comment:t},e.next=4,this.props.postComment(a,"gif");case 4:if(!e.sent){e.next=10;break}return e.next=8,this.props.getSingleGif(this.state.gifId);case 8:"success"===(r=e.sent).status&&(n=r.data,this.setState({gifPost:n}));case 10:this.setState({loading:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.gifPost,r=a.authorDetails,s=a.comments;return n.a.createElement("div",{className:"gif"},n.a.createElement("div",{className:"container"},t.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},t.feedback),n.a.createElement(W.a,{className:"loading",css:he,loading:this.state.loading}),a.title&&n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("div",{className:"card",style:{width:"70%"}},n.a.createElement("img",{src:a.url,className:"card-img-top",alt:"Gif"}),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},a.title),n.a.createElement("div",{className:"card-text"},"Created By:",n.a.createElement("strong",null," ",a.createdOn&&n.a.createElement("div",null," "+r.firstName+" "+r.lastName+" "+this.dateFormat(a.createdOn))))),a.authorId===this.props.auth.user.id&&n.a.createElement("button",{className:"btn btn-outline-danger form-control","data-toggle":"modal","data-target":"#deleteModal",disabled:this.state.loading},"Delete Post")),n.a.createElement("div",{className:"modal fade",id:"deleteModal",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog",role:"document"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h5",{className:"modal-title",id:"deleteModalLabel"},"Are You Sure You Want to Delete this Post?"),n.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{className:"modal-body text-danger"},"You cannot undo this Action."),n.a.createElement("div",{className:"modal-footer flex-row"},n.a.createElement("div",{className:"col"},n.a.createElement("button",{type:"button",className:"btn btn-info form-control","data-dismiss":"modal"},"Close")),n.a.createElement("div",{className:"col"},n.a.createElement("div",{onClick:this.deletePost,className:"btn btn-outline-danger form-control","data-dismiss":"modal"},"Delete Post"))))))),n.a.createElement("div",{className:"col-md-4 mt-2 flex-column bd-highlight mb-3"},n.a.createElement("div",{className:"mt-4 pb-2"},n.a.createElement(de,{comments:s,onSubmitComment:this.submitComment,loading:this.state.loading}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),be=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors}}),{getSingleGif:function(e){return function(){var t=Object(x.a)(k.a.mark((function t(a){var r,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="Bearer "+localStorage.jwtToken,t.next=4,fetch("".concat(h,"/gifs/").concat(e),{method:"GET",headers:{Authorization:r}});case 4:return n=t.sent,t.next=7,n.json();case 7:if("error"!==(n=t.sent).status){t.next=13;break}return"object"===typeof n.error?a({type:p,payload:n.error}):a({type:p,payload:{feedback:n.error}}),t.abrupt("return",n);case 13:return a({type:p,payload:{}}),t.abrupt("return",n);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0),a({type:p,payload:{feedback:"An error occurred, please try again"}});case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}()},deleteGif:function(e,t){return function(){var a=Object(x.a)(k.a.mark((function a(r){var n,s;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n="Bearer "+localStorage.jwtToken,a.next=4,fetch("".concat(h,"/gifs/").concat(e),{method:"DELETE",headers:{Authorization:n}});case 4:return s=a.sent,a.next=7,s.json();case 7:if("error"!==(s=a.sent).status){a.next=13;break}return"object"===typeof s.error?r({type:p,payload:s.error}):r({type:p,payload:{feedback:s.error}}),a.abrupt("return",s);case 13:if("success"!==s.status){a.next=19;break}return r({type:p,payload:{}}),r({type:"NOTIFICATION",payload:{type:"success",message:"Post Deleted Successfully"}}),t.push("/feeds"),a.abrupt("return",s);case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(0),console.log(a.t0),r({type:p,payload:{feedback:"An error occurred, please try again"}});case 25:case"end":return a.stop()}}),a,null,[[0,21]])})));return function(e){return a.apply(this,arguments)}}()},postComment:ne})(Object(i.e)(fe)),ge=a(47),ve=a.n(ge);a(79);function ye(){var e=Object(G.a)(["\n  position: fixed;\n  left: 45%;\n  top: 35%;\n  z-index: 1;\n"]);return ye=function(){return e},e}var Ee=Object(q.css)(ye()),Ne=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={errors:{},title:"",article:"",loading:!1},e.onChange=e.onChange.bind(Object(B.a)(e)),e.onSubmit=e.onSubmit.bind(Object(B.a)(e)),e.handleEditorInput=e.handleEditorInput.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.auth.isAuthenticated||this.props.history.push("/login");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==this.state.article){e.next=4;break}return this.setState({errors:{article:"article cannot be empty"}}),e.abrupt("return");case 4:return this.setState({loading:!0}),a={title:this.state.title,article:this.state.article},e.next=8,this.props.postArticle(a,this.props.history);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"handleEditorInput",value:function(e){this.setState({article:e})}},{key:"render",value:function(){var e=this.state.errors;return n.a.createElement("div",{className:"Create-Article"},n.a.createElement("div",{className:"container"},e.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},e.feedback),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("div",null,n.a.createElement("h2",{className:"text-center mb-4"},"Create Article")),n.a.createElement("form",{className:"form",onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Title",name:"title",required:!0,value:this.state.title,onChange:this.onChange,autoFocus:!0}),e.title&&n.a.createElement("div",{className:"text-danger"},e.title)),n.a.createElement("div",{className:"form-group"},n.a.createElement(ve.a,{placeholder:"Type Your Article Here",value:this.state.article,onChange:this.handleEditorInput}),e.article&&n.a.createElement("div",{className:"text-danger"},e.article)),n.a.createElement("button",{type:"submit",disabled:this.state.loading,className:"btn btn-info form-control mt-4"},"Create")),n.a.createElement(W.a,{className:"loading",css:Ee,loading:this.state.loading})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),Oe=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors}}),{postArticle:function(e,t){return function(){var a=Object(x.a)(k.a.mark((function a(r){var n,s,o;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n="Bearer "+localStorage.jwtToken,a.next=4,fetch("".concat(h,"/articles"),{method:"POST",withCredentials:!0,body:JSON.stringify(e),headers:{Authorization:n,"Content-Type":"application/json"}});case 4:return s=a.sent,a.next=7,s.json();case 7:"error"===(s=a.sent).status?"object"===typeof s.error?r({type:p,payload:s.error}):r({type:p,payload:{feedback:s.error}}):(r({type:p,payload:{}}),r({type:"NOTIFICATION",payload:{type:"success",message:"Article Created Successfully"}}),o=s.data.articleId,t.push("/articles/".concat(o))),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0),r({type:p,payload:{feedback:"An error occurred, please try again"}});case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}})(Object(i.e)(Ne));function je(){var e=Object(G.a)(["\n  position: fixed;\n  left: 45%;\n  top: 35%;\n  z-index: 1;\n"]);return je=function(){return e},e}var ke=Object(q.css)(je()),xe=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={articleId:"",errors:{},article:{},loading:!1},e.deleteArticle=e.deleteArticle.bind(Object(B.a)(e)),e.submitComment=e.submitComment.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.auth.isAuthenticated||this.props.history.push("/login"),t=this.props.match.params.articleId,this.setState({articleId:t}),0!==Object.keys(this.state.article).length){e.next=9;break}return this.setState({loading:!0}),e.next=7,this.props.getSingleArticle(t);case 7:"success"===(a=e.sent).status&&(r=a.data,this.setState({article:r}));case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dateFormat",value:function(e){var t=new Date(e),a=new Date;return ue.a.format(a,"ddd. MMM. DD YYYY")===ue.a.format(t,"ddd. MMM. DD YYYY")?ue.a.format(t,"Today, hh:mm A"):ue.a.format(t,"hh:mm A, ddd. MMM. DD YYYY")}},{key:"deleteArticle",value:function(){this.setState({loading:!0}),this.props.deleteArticle(this.state.articleId,this.props.history)}},{key:"submitComment",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var a,r,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),a={articleId:this.state.articleId,comment:t},e.next=4,this.props.postComment(a,"article");case 4:if(!e.sent){e.next=10;break}return e.next=8,this.props.getSingleArticle(this.state.articleId);case 8:"success"===(r=e.sent).status&&(n=r.data,this.setState({article:n}));case 10:this.setState({loading:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.article,r=a.authorDetails,s=a.comments;return n.a.createElement("div",{className:"articles"},n.a.createElement("div",{className:"container"},t.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},t.feedback),n.a.createElement(W.a,{className:"loading",css:ke,loading:this.state.loading}),a.title&&n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("div",{className:"pt-3 pb-3",style:{width:"90%"}},n.a.createElement("h2",{className:""},a.title),n.a.createElement("h6",{className:"card-subtitle mb-2 pt-2 text-muted"},a.createdOn&&n.a.createElement("div",null,"Posted By:"," "+r.firstName+" "+r.lastName+" "+this.dateFormat(a.createdOn))),n.a.createElement("p",{dangerouslySetInnerHTML:{__html:a.article},className:"text-justify"}),a.authorId===this.props.auth.user.id&&n.a.createElement("div",{className:"form-row"},n.a.createElement("div",{className:"col"},n.a.createElement(c.b,{to:"/articles/".concat(a.id,"/edit"),className:"btn btn-info form-control"},"Edit Article")),n.a.createElement("div",{className:"col"},n.a.createElement("button",{className:"btn btn-outline-danger form-control","data-toggle":"modal",disabled:this.state.loading,"data-target":"#deleteModal"},"Delete Article"))),n.a.createElement("div",{className:"modal fade",id:"deleteModal",tabIndex:"-1",role:"dialog","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog",role:"document"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h5",{className:"modal-title",id:"deleteModalLabel"},"Are You Sure You Want to Delete this Article?"),n.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{className:"modal-body text-danger"},"You cannot undo this Action."),n.a.createElement("div",{className:"modal-footer flex-row"},n.a.createElement("div",{className:"col"},n.a.createElement("button",{type:"button",className:"btn btn-info form-control","data-dismiss":"modal"},"Close")),n.a.createElement("div",{className:"col"},n.a.createElement("div",{onClick:this.deleteArticle,className:"btn btn-outline-danger form-control","data-dismiss":"modal"},"Delete Article")))))))),n.a.createElement("div",{className:"col-md-4 mt-2 flex-column bd-highlight mb-3"},n.a.createElement("div",{className:"mt-4 pb-2"},n.a.createElement(de,{comments:s,onSubmitComment:this.submitComment,loading:this.state.loading}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),we=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors}}),{getSingleArticle:le,deleteArticle:function(e,t){return function(){var a=Object(x.a)(k.a.mark((function a(r){var n,s;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n="Bearer "+localStorage.jwtToken,a.next=4,fetch("".concat(h,"/articles/").concat(e),{method:"DELETE",headers:{Authorization:n}});case 4:return s=a.sent,a.next=7,s.json();case 7:if("error"!==(s=a.sent).status){a.next=13;break}return"object"===typeof s.error?r({type:p,payload:s.error}):r({type:p,payload:{feedback:s.error}}),a.abrupt("return",s);case 13:if("success"!==s.status){a.next=19;break}return r({type:p,payload:{}}),r({type:"NOTIFICATION",payload:{type:"success",message:"Article Deleted Successfully"}}),t.push("/feeds"),a.abrupt("return",s);case 19:a.next=25;break;case 21:a.prev=21,a.t0=a.catch(0),console.log(a.t0),r({type:p,payload:{feedback:"An error occurred, please try again"}});case 25:case"end":return a.stop()}}),a,null,[[0,21]])})));return function(e){return a.apply(this,arguments)}}()},postComment:ne})(Object(i.e)(xe));function Se(){var e=Object(G.a)(["\n  position: fixed;\n  left: 45%;\n  top: 35%;\n  z-index: 1;\n"]);return Se=function(){return e},e}var Ce=Object(q.css)(Se()),Ae=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={feeds:[],errors:{},loading:!1},e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.auth.isAuthenticated||this.props.history.push("/login"),0!==this.state.feeds.length){e.next=7;break}return this.setState({loading:!0}),e.next=5,this.props.getFeeds();case 5:"success"===(t=e.sent).status&&(a=t.data,this.setState({feeds:a}));case 7:this.setState({loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dateFormat",value:function(e){var t=new Date(e),a=new Date;return ue.a.format(a,"ddd. MMM. DD YYYY")===ue.a.format(t,"ddd. MMM. DD YYYY")?ue.a.format(t,"Today, hh:mm A"):ue.a.format(t,"ddd. MMM. DD, YYYY")}},{key:"render",value:function(){var e=this,t=this.state,a=t.errors,r=t.feeds;return n.a.createElement("div",{className:"feeds"},n.a.createElement("div",{className:"container"},a.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},a.feedback),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement(W.a,{className:"loading",css:Ce,loading:this.state.loading}),r.map((function(t){return n.a.createElement("div",{key:t.id,className:"p-3"},t.article&&n.a.createElement("div",{className:"card",style:{width:"90%"}},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},t.title),n.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},t.createdOn&&n.a.createElement("div",null,"Posted By:"," "+t.firstname+" "+t.lastname+" "+e.dateFormat(t.createdOn))),n.a.createElement("p",{dangerouslySetInnerHTML:{__html:t.article.substring(0,150)+"<p>....</p>"},className:"card-text text-justify"}),n.a.createElement(c.b,{to:"/articles/".concat(t.id),className:"btn btn-info form-control card-link"},"View Article"))),t.url&&n.a.createElement("div",{className:"card",style:{width:"90%"}},n.a.createElement("img",{src:t.url,className:"card-img-top",alt:"Article Gif"}),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"card-text"},t.title),n.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},t.createdOn&&n.a.createElement("div",null,"Posted By:"," "+t.firstname+" "+t.lastname+" "+e.dateFormat(t.createdOn))),n.a.createElement(c.b,{to:"/gifs/".concat(t.id),className:"btn btn-info card-link form-control"},"View Image  "))))}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),Ie=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors}}),{getFeeds:function(){return function(){var e=Object(x.a)(k.a.mark((function e(t){var a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="Bearer "+localStorage.jwtToken,e.next=4,fetch("".concat(h,"/feed"),{method:"GET",headers:{Authorization:a}});case 4:return r=e.sent,e.next=7,r.json();case 7:if("error"!==(r=e.sent).status){e.next=13;break}return"object"===typeof r.error?t({type:p,payload:r.error}):t({type:p,payload:{feedback:r.error}}),e.abrupt("return",r);case 13:return t({type:p,payload:{}}),e.abrupt("return",r);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),t({type:p,payload:{feedback:"An error occurred, please try again"}});case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}()}})(Object(i.e)(Ae));function De(){var e=Object(G.a)(["\n  position: fixed;\n  left: 45%;\n  top: 35%;\n  z-index: 1;\n"]);return De=function(){return e},e}var Te=Object(q.css)(De()),Pe=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={articleId:"",invalidUser:!1,errors:{},title:"",article:"",loading:!1},e.onChange=e.onChange.bind(Object(B.a)(e)),e.onSubmit=e.onSubmit.bind(Object(B.a)(e)),e.handleEditorInput=e.handleEditorInput.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.auth.isAuthenticated||this.props.history.push("/login"),t=this.props.match.params.articleId,this.setState({articleId:t}),0!==Object.keys(this.state.article).length){e.next=14;break}return this.setState({loading:!0}),e.next=7,this.props.getSingleArticle(t);case 7:if("success"!==(a=e.sent).status){e.next=14;break}if((r=a.data).authorId===this.props.auth.user.id){e.next=13;break}return this.setState({invalidUser:!0,loading:!1}),e.abrupt("return");case 13:this.setState({title:r.title,article:r.article});case 14:this.setState({loading:!1});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==this.state.article){e.next=4;break}return this.setState({errors:{article:"article cannot be empty"}}),e.abrupt("return");case 4:return this.setState({loading:!0}),a={articleId:this.state.articleId,title:this.state.title,article:this.state.article},e.next=8,this.props.editArticle(a,this.props.history);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"handleEditorInput",value:function(e){this.setState({article:e})}},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.invalidUser;return n.a.createElement("div",{className:"Create-Article"},n.a.createElement("div",{className:"container"},t.feedback&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},t.feedback),a&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Cannot Edit Another User's Article"),!a&&n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 m-auto"},n.a.createElement("div",null,n.a.createElement("h2",{className:"text-center mb-4"},"Create Article")),n.a.createElement("form",{className:"form",onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:"Title",name:"title",required:!0,value:this.state.title,onChange:this.onChange,autoFocus:!0}),t.title&&n.a.createElement("div",{className:"text-danger"},t.title)),n.a.createElement("div",{className:"form-group"},n.a.createElement(ve.a,{placeholder:"Type Your Article Here",value:this.state.article,onChange:this.handleEditorInput}),t.article&&n.a.createElement("div",{className:"text-danger"},t.article)),n.a.createElement("button",{type:"submit",disabled:this.state.loading,className:"btn btn-info form-control mt-4"},"Update")),n.a.createElement(W.a,{className:"loading",css:Te,loading:this.state.loading})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.errors!==t.errors?{errors:e.errors,loading:!1}:null}}]),t}(r.Component),Me=Object(l.b)((function(e){return{auth:e.auth,errors:e.errors}}),{editArticle:function(e,t){return function(){var a=Object(x.a)(k.a.mark((function a(r){var n,s,o;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n="Bearer "+localStorage.jwtToken,a.next=4,fetch("".concat(h,"/articles/").concat(e.articleId),{method:"PATCH",withCredentials:!0,body:JSON.stringify(e),headers:{Authorization:n,"Content-Type":"application/json"}});case 4:return s=a.sent,a.next=7,s.json();case 7:"error"===(s=a.sent).status?"object"===typeof s.error?r({type:p,payload:s.error}):r({type:p,payload:{feedback:s.error}}):(r({type:p,payload:{}}),o=e.articleId,r({type:"NOTIFICATION",payload:{type:"success",message:"Article Updated Successfully"}}),t.push("/articles/".concat(o))),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0),r({type:p,payload:{feedback:"An error occurred, please try again"}});case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},getSingleArticle:le})(Object(i.e)(Pe)),Ye=function(e){function t(){var e;return Object(I.a)(this,t),(e=Object(T.a)(this,Object(P.a)(t).call(this))).state={notification:{}},e.show=n.a.createRef(),e.clearNotification=e.clearNotification.bind(Object(B.a)(e)),e}return Object(M.a)(t,e),Object(D.a)(t,[{key:"componentDidUpdate",value:function(e,t){Object.keys(this.state.notification).length>0&&this.state.notification.message!==t.notification.message&&this.show.current.classList.add("show")}},{key:"clearNotification",value:function(){this.show.current.classList.remove("show"),this.setState({notification:""}),this.props.deleteNotification()}},{key:"render",value:function(){var e=this.state.notification,t=e.message,a=e.type;return n.a.createElement("div",null,t&&n.a.createElement("div",{className:"alert ".concat("success"===a?"alert-success":"alert-danger"," \n        alert-dismissible fade"),role:"alert",ref:this.show},n.a.createElement("strong",null,this.props.notification.message),n.a.createElement("button",{type:"button",onClick:this.clearNotification,className:"close","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.notification!==t.notification.message?{notification:e.notification}:null}}]),t}(r.Component),Fe=Object(l.b)((function(e){return{auth:e.auth,notification:e.notification}}),{deleteNotification:function(){return function(){var e=Object(x.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"NOTIFICATION",payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ye);if(localStorage.jwtToken){var Le=S()(localStorage.jwtToken);O.dispatch(C(Le));var Re=Date.now()/1e3;Le.exp<Re&&(O.dispatch(A()),window.location.href="/login")}var Ue=function(){return n.a.createElement(l.a,{store:O},n.a.createElement(c.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(F,null),n.a.createElement(Fe,null),n.a.createElement("div",{className:"router-component"},n.a.createElement(i.a,{exact:!0,path:"/",component:_}),n.a.createElement(i.a,{exact:!0,path:"/login",component:$}),n.a.createElement(i.a,{exact:!0,path:"/register",component:re}),n.a.createElement(i.a,{exact:!0,path:"/create-gif",component:ie}),n.a.createElement(i.a,{exact:!0,path:"/gifs/:gifId",component:be}),n.a.createElement(i.a,{exact:!0,path:"/create-article",component:Oe}),n.a.createElement(i.a,{exact:!0,path:"/articles/:articleId",component:we}),n.a.createElement(i.a,{exact:!0,path:"/feeds",component:Ie}),n.a.createElement(i.a,{exact:!0,path:"/articles/:articleId/edit",component:Me})),n.a.createElement(z,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},83:function(e,t,a){e.exports=a.p+"static/media/devc.d0797a88.jpg"},84:function(e,t,a){e.exports=a(206)},89:function(e,t,a){},90:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.e7f5287d.chunk.js.map